# 네트워크 계층
* 물리 계층과 데이터링크 계층 → LAN에 국한된 통신
* LAN을 넘어서기 위한 계층 → 라우팅
* 단편화
    - 패킷의 크기를 MTU(Maximum Transmission Unit) 이하로 유지 → 목적지에서 재조합
* IP
    - IP란?
        - MAC주소는 도달 경로를 파악하기 어려움 (라우팅 어려움)
        - IP(논리 주소)는 주소, MAC(물리 주소)은 주민등록번호
    - IP 주소
        - 구성
            - 네트워크 주소, 호스트 주소
        - 서브넷 마스크
            - 서브넷 마스크와 IP 주소의 비트 AND 연산 → 네트워크 주소
            - CIDR 표기
                - 서브넷 마스크 상의 1의 개수를 IP주소/숫자로 표기
                - 192.168.100.103/30
        - 분류
            - 공인 IP 주소 : 인터넷 사용할 때 사용하는 고유한 주소
            - 사설 IP 주소 : 사설 네트워크 내에서 사용하는 고유하지 않은 주소
            - NAT : 공인 IP 주소와 사설 IP 주소 간의 변환 기능
                - 하나의 공인 IP 주소를 여러 사설 IP 주소가 공유 가능
            - DHCP
                - 동적 IP 주소를 할당하기 위한 프로토콜
                - 정적 IP 주소
                - 동적 IP 주소
    - NAT
        - 공인 IP 주소와 사설 IP 주소 간의 변환 기능
            - 하나의 공인 IP 주소를 여러 사설 IP 주소가 공유 가능 (포트 활용)
    - 직접 할당
    - 자동 할당(DHCP)
        - IPv4 
            - 헤더
                - 식별자, 플래그, 단편화 오프셋
                    - 식별자 : 패킷에 할당된 번호 (재조합 시 사용)
                    - 플래그 : 부가 정보 (미사용)
                    - 단편화 오프셋 : 단편화되기 전 데이터가 얼마나 떨어져 있는가
                - TTL, 프로토콜
                    - TTL (Time To Live) : 패킷의 수명, 라우터를 거칠 때마다 1감소
                    - 프로토콜 : 상위 계층의 프로토콜 
            - 주소
                - 4바이트 (32비트)로 표현 가능
                - 한 옥텟은 0~255 범위의 네 개의 십진수로 표기
                - IP 주소 부족
        - IPv6 
            - 주소
                - 16바이트 (128비트)로 표현 가능
            - 헤더
                - 기본 헤더
                - 확장 헤더
                    - 단편화 확장 헤더
* ARP
    - ARP란?
        - 동일 네트워크 내 호스트의 MAC주소를 알아내기 위한 프로토콜
    - 동작 과정
        - ARP 요청 (브로드캐스트 메시지)
            - 특정 IP 주소를 가진 호스트의 MAC 주소를 알아내기 위해 보내는 브로드캐스트 메시지
        - ARP 응답
            - ARP 요청에 응답. 자신의 MAC주소가 포함
        - ARP 테이블 (ARP 캐시) 갱신
            - ARP 테이블 : MAC 주소와 IP주소가 매핑된 표 형태의 데이터
            - 추가된 호스트는 ARP 요청 보낼 필요 X. 일정 시간이 지나면 삭제
        - 다른 네트워크에 속한 호스트의 MAC 주소 알아내기
* ICMP
    - IP 한계
        - 비 신뢰성 : 패킷이 목적지까지 제대로 전송한다는 보장이 없음
        - 비 연결형 : 호스트 간의 사전 연결 수립이 없음
    - ICMP란
        - IP의 비신뢰성과 비연결형 특성을 보완하기 위한 네트워크 계층 프로토콜
            - IP 패킷의 전송 과정에 대한 피드백 메시지 제공
* 라우터와 라우팅
    - 라우팅 : 패킷이 이동할 최적 경로 설정, 해당 경로로 패킷 이동
        - 라우팅 프로토콜 : 라우팅을 수행하는 방법
    - 홉 : 라우터와 라우터 간의 패킷 이동 과정
    - 라우팅 테이블
        - 특정 목적지까지 도달하기 위한 정보를 명시하는 표와 같은 정보
    - 롱기스트 프리픽스 매치
        - 여러 라우팅 테이블 항목과 일치할 경우 가장 길게 일치하는 항목 선택
    - 디폴트 라우트
        - 합치되는 경로가 없을 경우 기본으로 내보낼 경로 
    - 라우팅 테이블 조회하기
* 라우팅 테이블 만드는 방법
    - 정적 라우팅 : 수동으로 라우팅 테이블 항목 채우기
    - 동적 라우팅 : 자동으로 라우팅 테이블 항목 채우기 (라우팅 프로토콜)
        - 경로 우회 가능
    - 라우팅 프로토콜
